CREATE TABLE TITEM(
	ID INT PRIMARY KEY IDENTITY(1,1),
	KODE VARCHAR(30),
	NAMA VARCHAR(100),
	NOTES VARCHAR(150),
	GROUP_ID INT,
	MERK_ID INT,
	PPN FLOAT,
	RAK VARCHAR(30),
	STOCKUOM_ID INT,
	LEADTIME INT,
	ISACTIVE SMALLINT DEFAULT 0,
	MODIFIEDDATE DATETIME2(0),
	MODIFIEDBY VARCHAR(30)	
)

CREATE TABLE TITEMUOM(
	ID INT PRIMARY KEY IDENTITY(1,1),
	ITEM_ID INT,
	UOM_ID INT FOREIGN KEY REFERENCES TUOM(ID),
	KONVERSI FLOAT,
	HARGABELI FLOAT,
	HARGAAVG FLOAT,
	HARGAJUAL1 FLOAT,
	HARGAJUAL2 FLOAT,
	HARGAJUAL3 FLOAT,
	HARGAJUAL4 FLOAT,
	MODIFIEDDATE DATETIME2(0),
	MODIFIEDBY VARCHAR(30)
)

CREATE VIEW V_ITEM AS
SELECT A.ID, A.KODE, A.NAMA, B.NAMA AS MERK, 
C.NAMA AS GROUP_BARANG, A.PPN, A.RAK,
E.UOM AS UOMSTOCK, D.HARGAJUAL1 AS HARGAUMUM,
D.HARGAJUAL2 AS HARGABENGKEL, D.HARGAJUAL3 AS HARGAGROSIR, 
D.HARGAJUAL4 AS HARGAKELILINGM,
A.MODIFIEDDATE, A.MODIFIEDBY, A.ISACTIVE, A.NOTES AS CATATAN
FROM TITEM A
LEFT JOIN TMERK B ON A.MERK_ID = B.ID
LEFT JOIN TITEMGROUP C ON A.GROUP_ID = C.ID
LEFT JOIN TITEMUOM D ON A.STOCKUOM_ID = D.UOM_ID 
AND D.ITEM_ID = A.ID
LEFT JOIN TUOM E ON D.UOM_ID = E.ID
